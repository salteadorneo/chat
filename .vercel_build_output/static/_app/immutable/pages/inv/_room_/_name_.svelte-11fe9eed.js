import{S as f,i as g,s as v,L as m,v as y}from"../../../chunks/index-8d614d0f.js";import{p as k}from"../../../chunks/stores-b12f77dd.js";import{g as c,i as S}from"../../../chunks/chat-865b4333.js";import{u,g as p}from"../../../chunks/navigation-27e09178.js";import{g as h}from"../../../chunks/user-c45a3573.js";import"../../../chunks/browser-3fd718e3.js";import"../../../chunks/singletons-4a6438bd.js";function N(t,n,r){let e,o;m(t,k,a=>r(0,e=a)),m(t,u,a=>r(1,o=a)),y(async()=>{const a=e.params.name,l=await h({token:`anonymous_${a}`});u.set({name:a,avatar:`https://i.pravatar.cc/150?u=${a}`,email:"a@a.com",token:l,userName:a}),localStorage.user=JSON.stringify(o),o&&S({accessToken:o.token});try{const s=await c({room:e.params.room});s?p("/"+s.channelState.uniqueName):i()}catch{}});async function i(){return setTimeout(async()=>{const a=await c({room:e.params.room});a?p("/"+a.channelState.uniqueName):i()},2e3)}return[]}class $ extends f{constructor(n){super(),g(this,n,N,null,v,{})}}export{$ as default};
