import{S as k,i as E,s as x,e as p,t as h,c as _,a as d,h as g,d as u,b as w,g as $,H as f,Q as H,E as v,L as C,k as N,w as T,m as q,x as z,y as M,j as O,q as B,o as D,B as R,v as U}from"../chunks/index-8d614d0f.js";import{u as b,a as F,g as y}from"../chunks/navigation-27e09178.js";import{i as j,c as I,a as J}from"../chunks/chat-865b4333.js";import"../chunks/singletons-4a6438bd.js";import"../chunks/browser-3fd718e3.js";function L(l){let e,o,t,n,s,r;return{c(){e=p("div"),o=p("form"),t=p("button"),n=h("Empezar nuevo juego"),this.h()},l(i){e=_(i,"DIV",{});var m=d(e);o=_(m,"FORM",{});var a=d(o);t=_(a,"BUTTON",{type:!0});var c=d(t);n=g(c,"Empezar nuevo juego"),c.forEach(u),a.forEach(u),m.forEach(u),this.h()},h(){w(t,"type","submit")},m(i,m){$(i,e,m),f(e,o),f(o,t),f(t,n),s||(r=H(o,"submit",l[0]),s=!0)},p:v,i:v,o:v,d(i){i&&u(e),s=!1,r()}}}function Q(l,e,o){let t;C(l,b,r=>o(1,t=r));let n=Math.random().toString(36).substring(2);async function s(r){if(r.preventDefault(),!t||(t==null?void 0:t.token)==null)return;j({accessToken:t.token});const i=await I({room:n});i&&(F.set(i),y(`/${n}`))}return[s]}class V extends k{constructor(e){super(),E(this,e,Q,L,x,{})}}function A(l){var m;let e,o,t=((m=l[0])==null?void 0:m.name)+"",n,s,r,i;return r=new V({}),{c(){e=p("h1"),o=h("Hola "),n=h(t),s=N(),T(r.$$.fragment)},l(a){e=_(a,"H1",{});var c=d(e);o=g(c,"Hola "),n=g(c,t),c.forEach(u),s=q(a),z(r.$$.fragment,a)},m(a,c){$(a,e,c),f(e,o),f(e,n),$(a,s,c),M(r,a,c),i=!0},p(a,[c]){var S;(!i||c&1)&&t!==(t=((S=a[0])==null?void 0:S.name)+"")&&O(n,t)},i(a){i||(B(r.$$.fragment,a),i=!0)},o(a){D(r.$$.fragment,a),i=!1},d(a){a&&u(e),a&&u(s),R(r,a)}}}function G(l,e,o){let t;return C(l,b,n=>o(0,t=n)),U(async()=>{const n=localStorage.user?JSON.parse(localStorage.user):{};b.set(n),(!t||(t==null?void 0:t.token)==null)&&y("/"),t&&j({accessToken:t.token});const s=await J({});s&&s.items[0]&&y("/"+s.items[0].channelState.uniqueName)}),[t]}class Z extends k{constructor(e){super(),E(this,e,G,A,x,{})}}export{Z as default};
